\> [!caution] This page contained a drawing which was not converted.   

![Exported image](Exported%20image%2020260112170843-0.png)

问题：如果直接采样Unity OpenGL给我们的深度图 会导致距离远的物体 精度不足 会发生重叠问题

![Exported image](Exported%20image%2020260112170845-1.png)

设置图形接口

![Exported image](Exported%20image%2020260112170846-2.png)

openGL 渲染远处是红色 （所以是没有反转的 DX远处是黑色的 所以是DX的API自动反转了）

![Exported image](Exported%20image%2020260112170848-3.png)

色阶工具作用 数据重映射 Clear成最大值 1 越近的物体越接近0

01范围映射到01范围 0.998和0.999看不出差别

0.99 - 1范围映射到01范围 0.998和0.999看不出差别

![Exported image](Exported%20image%2020260112170851-4.png)

直接用除法 在实际的渲染上也是看不出深度变化的 所以可以模拟这个色阶工具 后面这个参数是插值系数

为什么要用SmoothStep：因为要提高精度 比如说0.7-1变化到0-1之间的时候 那么中间的部分（也就是原来的0.8-0.9 ）会变的很敏感

![Exported image](Exported%20image%2020260112170853-5.png)

是没有反转的深度值（也同时解决了精度问题）